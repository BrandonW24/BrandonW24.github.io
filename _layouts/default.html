<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ page.title | default: site.title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/styles.css' | relative_url }}">

    <!-- Mermaid.js (Moved inside <head> to avoid issues) -->
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/panzoom/9.4.2/panzoom.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const chart = document.querySelector(".mermaid"); // Selects the flowchart container
        const zoomInstance = panzoom(chart, {
          maxZoom: 3,  // Allow zooming in up to 3x
          minZoom: 0.5, // Allow zooming out to 50%
          smoothScroll: true
        });

        // Optional: Reset zoom on double-click
        chart.addEventListener("dblclick", () => zoomInstance.zoomAbs(0, 0, 1));
      });
    </script>


    <script>
      function openLightbox(img) {
          document.getElementById("lightbox").style.display = "flex";
          document.getElementById("lightbox-img").src = img.src;
      }

      function closeLightbox() {
          document.getElementById("lightbox").style.display = "none";
      }
    </script>

  </head>
  <body>
    {% include header.html %}
    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        {{ content }}
      </div>
    </main>
    {% include footer.html %}
  </body>
</html>
